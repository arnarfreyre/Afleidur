<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Problem Sets - Derivatives Course</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Main Content Container -->
    <div class="container" id="mainContent">
        <div class="main-header">
            <h1>Derivatives: Financial Engineering</h1>
            <p>Problem Sets and Practice Materials</p>
            
            <!-- Navigation tabs -->
            <div class="nav-tabs">
                <a href="index.html" class="nav-tab">Study Materials</a>
                <a href="problem-sets.html" class="nav-tab active">Problem Sets</a>
                <a href="solvers.html" class="nav-tab">Solvers</a>
                <a href="formulas.html" class="nav-tab">Formulas</a>
            </div>
        </div>

        <div id="problemSetsContainer" class="chapter-grid">
            <!-- Problem sets will be dynamically loaded here -->
        </div>

        <div style="margin-top: 4rem; padding-top: 2rem; border-top: 1px solid #ddd;">
            <h2 style="border-bottom: none; font-size: 1.4em; color: #666;">Problem Set Information</h2>
            <p style="color: #666;">
                Problem sets are released weekly and cover the material from lectures and readings. 
                Solutions will be made available after the due date. Practice problems for midterm 
                and final exams are also provided.
            </p>
            <p style="color: #666;">
                <strong>Submission:</strong> Please submit your solutions as a single PDF file through the course portal.
            </p>
        </div>
    </div>

    <!-- PDF Viewer Container (hidden by default) -->
    <div class="pdf-viewer-container" id="pdfViewerContainer" style="display: none;">
        <div class="pdf-header">
            <button class="back-button" onclick="closePdfViewer()">‚Üê Back to Problem Sets</button>
            <h2 id="pdfTitle">Document Viewer</h2>
        </div>
        <div class="pdf-content">
            <iframe id="pdfFrame" src="" frameborder="0"></iframe>
        </div>
    </div>

    <!-- Load configuration, problem sets data, and render utilities -->
    <script src="js/config.js"></script>
    <script src="js/problemSets.js"></script>
    <script src="js/render-utils.js"></script>
    
    <script>

        // Function to open PDF viewer
        function openPdfViewer(pdfPath, title) {
            const mainContent = document.getElementById('mainContent');
            const pdfViewerContainer = document.getElementById('pdfViewerContainer');
            const pdfFrame = document.getElementById('pdfFrame');
            const pdfTitle = document.getElementById('pdfTitle');
            
            // Hide main content and show PDF viewer
            mainContent.style.display = 'none';
            pdfViewerContainer.style.display = 'block';
            
            // Set PDF source and title
            pdfFrame.src = pdfPath;
            pdfTitle.textContent = title;
            
            // Scroll to top
            window.scrollTo(0, 0);
        }
        
        // Function to close PDF viewer and return to main content
        function closePdfViewer() {
            const mainContent = document.getElementById('mainContent');
            const pdfViewerContainer = document.getElementById('pdfViewerContainer');
            const pdfFrame = document.getElementById('pdfFrame');
            
            // Show main content and hide PDF viewer
            mainContent.style.display = 'block';
            pdfViewerContainer.style.display = 'none';
            
            // Clear the iframe source
            pdfFrame.src = '';
            
            // Scroll to top
            window.scrollTo(0, 0);
        }
        
        // Initialize page when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Make openPdfViewer available globally for render-utils
            window.openPdfViewer = openPdfViewer;
            
            // Render problem sets using shared utilities
            if (window.renderUtils && window.problemSetAPI) {
                renderUtils.renderProblemSets('problemSetsContainer', problemSetAPI.problemSets);
            } else {
                console.error('Failed to load configuration or render utilities');
            }
        });
    </script>
</body>
</html>